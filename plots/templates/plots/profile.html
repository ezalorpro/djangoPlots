{% extends 'plots/base.html' %}

{% block cssContent %}
<style>
  .icon-separation {
    margin-left: 3px;
  }

  .icon-separation2 {
    margin-right: 0px;
    margin-left: 8px;
  }
</style>
{% endblock cssContent %}

{% block content %}

<div class="row">
  <div class="col s12 m12 l7">
    <div class="card-panel">
      <div class="row valign-wrapper">
        <div class="col s5 center">
          <img src="{{MEDIA_URL}}{{perfil.avatar}}" class="circle responsive-img" style="height:150px; width: 150px;" />
          <p class="flow-text">{{perfil.user.username}}</p>
        </div>
        <div class="col s7">
          <p class="flow-text" style="font-size: 14pt;"><i class="material-icons">person</i>
            {{perfil.user.first_name}} {{perfil.user.last_name}}</p>
          <p class="flow-text" style="font-size: 14pt;"><i class="material-icons">mail_outline</i>
            {{perfil.user.email}}</p>
          <p class="flow-text" style="font-size: 14pt;"><i class="material-icons">wc</i> {{perfil.gender}}</p>
          <p class="flow-text" style="font-size: 14pt;"><i class="material-icons">location_city</i> {{perfil.location}}
          </p>
          <p class="flow-text" style="font-size: 14pt;"><i class="material-icons">info</i> {{perfil.information}}</p>
          <a href="{% url 'plots:edit_profile' %}" class="btn waves-effect waves-light light-blue accent-4">Editar
            perfil <i class="material-icons right">edit</i></a>
        </div>
      </div>
    </div>
  </div>

  <div class="col s12 m12 l5">
    <ul class="collection with-header">
      <li class="collection-header">
        <h4 class="center">Post realizados</h4>
      </li>
      {% for post in post_list %}
      <li class="collection-item">
        <div class="truncate">
          {{post.title}}
          <div>
            <a href="#modal{{post.id}}" class="secondary-content red-text text-darken-1 modal-trigger"><i
                class="material-icons icon-separation2">delete</i><a href="{% url 'plots:edit_post' post.id %}"
                class="secondary-content light-blue-text text-accent-4"><i
                  class="material-icons icon-separation">edit</i></a></a><a href="{% url 'plots:post' post.id %}"
              class="secondary-content light-blue-text text-accent-4"><i
                class="material-icons icon-separation">visibility</i></a>
          </div>
        </div>
      </li>

      <!-- Modal Structure -->
      <div id="modal{{post.id}}" class="modal">
        <div class="modal-content">
          <h4 class="center">Confirmacion de borrado</h4>
          <h5 class="center">Â¿Esta seguro que desea borrar este post?</h5>
          <p><strong>Titulo:</strong> {{post.title}}</p>
          <p><strong>Fecha de creacion:</strong> {{post.post_date}}</p>
          <p><strong>Ultima modificacion:</strong> {{post.post_modified}}</p>

        </div>
        <div class="modal-footer">
          <form action="{% url 'plots:delete_post' post.id %}" method="post">
            {% csrf_token %}
            <button type="submit" class="modal-close btn waves-effect waves-light red darken-1">Borrar</button>
            <a href="#!" class="modal-close btn-flat">Cancelar</a>
          </form>
        </div>
      </div>
      {% endfor %}
    </ul>

    <div class="row right-align">
      <div class="col s12">
        <a href="{% url 'plots:new_post' %}" class="btn waves-effect waves-light light-blue accent-4">Nuevo post<i
            class="material-icons right">add</i></a>
      </div>
    </div>
  </div>
</div>


{% endblock %}

{% block scriptsContent %}
<script>
  $(document).ready(function () {
    $('.modal').modal();
  });
</script>
{% endblock scriptsContent %}