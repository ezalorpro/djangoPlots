{% extends "plots/base.html" %}
{% load static %}

{% block cssContent %}
<link href="http://cdn.bokeh.org/bokeh/release/bokeh-2.0.0.min.css" rel="stylesheet" type="text/css">
<link href="http://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.0.0.min.css" rel="stylesheet" type="text/css">
<style>
  .input-field label {
    pointer-events: all !important;
    margin-top: -10px !important;
  }
</style>
{% endblock cssContent %}

{% block content %}
<div class="card-panel hoverable">
  <div class="row">
    <div class="col s12 m12 l6">
      <form id="id_formaPlots">
        <h5 style="margin-bottom: 40px;" class="center"> Ingrese los vectores para (X, Y)</h5>
        <div class="input-field col s12">
          <i class="material-icons prefix">border_horizontal</i>
          <label for="{{ form.x_points.name }}" class="active">{{ form.x_points.label }}</label>
          {{ form.x_points }}
        </div>
        <div class="input-field col s12">
          <i class="material-icons prefix">border_vertical</i>
          <label for="{{ form.y_points.name }}" class="active">{{ form.y_points.label }}</label>
          {{ form.y_points }}
        </div>
        <div class="col s12 right-align">
          <button id="graficar" type="submit" class="btn waves-effect waves-light light-blue accent-4 "
            style="margin-bottom: 20px">Enviar<i class="material-icons right">done</i></button>
        </div>
      </form>
    </div>

    <div id="plot-content" class="col s12 m12 l6">
      {% autoescape off %}
      {{div_bok}}
      {{script_bok}}
      {% endautoescape %}
    </div>

  </div>
</div>
{% endblock content %}

{% block scriptsContent %}
<script src="{% static 'plots/bokeh-2.0.0.min.js' %}" type="text/javascript"></script>
<script src="{% static 'plots/bokeh-widgets-2.0.0.min.js' %}" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function () {
    $('#id_formaPlots').submit(function (e) {
      e.preventDefault()
      $.ajax({
        url: "{% url 'plots:resultsplot'%}",
        type: 'post',
        data: {
          'csrfmiddlewaretoken': "{{ csrf_token }}",
          'x_points': $("#id_x_points").val(),
          'y_points': $("#id_y_points").val()
        },
        success: function (data) {
          $('#plot-content').html(data);
        }
      });
    });
  });
</script>
{% endblock scriptsContent %}